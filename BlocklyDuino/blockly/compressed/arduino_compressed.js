// Do not edit this file; automatically generated by build.py.
'use strict';
import ScratchBlocks from 'scratch-blocks';

Blockly.Arduino=new ScratchBlocks.Generator("Arduino");Blockly.Arduino.addReservedWords("setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,interger, constants,floating,point,void,bookean,char,unsigned,byte,int,word,long,float,double,string,String,array,static, volatile,const,sizeof,pinMode,digitalWrite,digitalRead,analogReference,analogRead,analogWrite,tone,noTone,shiftOut,shitIn,pulseIn,millis,micros,delay,delayMicroseconds,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random,lowByte,highByte,bitRead,bitWrite,bitSet,bitClear,bit,attachInterrupt,detachInterrupt,interrupts,noInterrupts");
Blockly.Arduino.ORDER_ATOMIC=0;Blockly.Arduino.ORDER_UNARY_POSTFIX=1;Blockly.Arduino.ORDER_UNARY_PREFIX=2;Blockly.Arduino.ORDER_MULTIPLICATIVE=3;Blockly.Arduino.ORDER_ADDITIVE=4;Blockly.Arduino.ORDER_SHIFT=5;Blockly.Arduino.ORDER_RELATIONAL=6;Blockly.Arduino.ORDER_EQUALITY=7;Blockly.Arduino.ORDER_BITWISE_AND=8;Blockly.Arduino.ORDER_BITWISE_XOR=9;Blockly.Arduino.ORDER_BITWISE_OR=10;Blockly.Arduino.ORDER_LOGICAL_AND=11;Blockly.Arduino.ORDER_LOGICAL_OR=12;Blockly.Arduino.ORDER_CONDITIONAL=13;
Blockly.Arduino.ORDER_ASSIGNMENT=14;Blockly.Arduino.ORDER_NONE=99;var profile={arduino:{description:"Arduino standard-compatible board",digital:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],analog:[["A0","A0"],["A1","A1"],["A2","A2"],["A3","A3"],["A4","A4"],["A5","A5"]],serial:9600},arduino_mega:{description:"Arduino Mega-compatible board"}};
profile["default"]=profile.arduino;
Blockly.Arduino.init=function(a){Blockly.Arduino.definitions_=Object.create(null);Blockly.Arduino.setups_=Object.create(null);Blockly.Arduino.variableDB_?Blockly.Arduino.variableDB_.reset():Blockly.Arduino.variableDB_=new ScratchBlocks.Names(Blockly.Arduino.RESERVED_WORDS_);Blockly.Arduino.variableDB_.setVariableMap(a.getVariableMap());var b=[];a=ScratchBlocks.Variables.allVariables(a);Blockly.Arduino.variableDB_.allVars=a;for(var c=0;c<a.length;c++)a[c].name=a[c].name.replace(" ","_"),isNaN(+a[c].name)||
(a[c].name="_"+a[c].name),b[c]="int "+Blockly.Arduino.variableDB_.getName(a[c].name,ScratchBlocks.Variables.NAME_TYPE)+";\n";Blockly.Arduino.definitions_.variables=b.join("\n")};
Blockly.Arduino.finish=function(a){a="  "+a.replace(/\n/g,"\n  ");a=a.replace(/\n\s+$/,"\n");a="void loop() \n{\n"+a+"\n}";var b=[],c=[],d;for(d in Blockly.Arduino.definitions_){var e=Blockly.Arduino.definitions_[d];e.match(/^#include/)?b.push(e):c.push(e)}e=[];for(d in Blockly.Arduino.setups_)e.push(Blockly.Arduino.setups_[d]);return(b.join("\n")+"\n\n"+c.join("\n")+"\nvoid setup() \n{\n  "+e.join("\n  ")+"\n}\n\n").replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+a};
Blockly.Arduino.scrubNakedValue=function(a){return a+";\n"};Blockly.Arduino.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'");return'"'+a+'"'};
Blockly.Arduino.scrub_=function(a,b){if(null===b)return"";var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=Blockly.Arduino.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==ScratchBlocks.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=Blockly.Arduino.allNestedComments(d))&&(c+=Blockly.Arduino.prefixLines(d,"// "))}e=a.nextConnection&&a.nextConnection.targetBlock();e=Blockly.Arduino.blockToCode(e);
return c+b+e};Blockly.Arduino.logic={};Blockly.Arduino.math_whole_number=function(){return[this.getFieldValue("NUM"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_positive_number=function(){return[this.getFieldValue("NUM"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.control_if=function(){var a=Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false",b=Blockly.Arduino.statementToCode(this,"SUBSTACK");return"if ("+a+") {\n"+b+"\n}\n"};
Blockly.Arduino.control_if_else=function(){var a=Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false",b=Blockly.Arduino.statementToCode(this,"SUBSTACK");a="if ("+a+") {\n"+b+"\n}";b=Blockly.Arduino.statementToCode(this,"SUBSTACK2");return a+(" else {\n"+b+"\n}\n")};Blockly.Arduino.control_repeat=function(){var a=Blockly.Arduino.valueToCode(this,"TIMES",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.statementToCode(this,"SUBSTACK");return"repeat( "+a+") {\n"+b+"\n}\n"};
Blockly.Arduino.control_forever=function(){return"while( true ) {\n"+Blockly.Arduino.statementToCode(this,"SUBSTACK")+"\n}\n"};Blockly.Arduino.control_wait=function(){return"delay("+1E3*Blockly.Arduino.valueToCode(this,"DURATION",Blockly.Arduino.ORDER_ATOMIC)+");\n\n"};Blockly.Arduino.control_wait_until=function(){return"while (!("+(Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false")+")) {}\n"};
Blockly.Arduino.control_repeat_until=function(){var a=Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false",b=Blockly.Arduino.statementToCode(this,"SUBSTACK");return"while ("+a+") {\n"+b+"\n}\n"};Blockly.Arduino.control_stop=function(){return"stopmotors();\nwhile ( true ) {}\n"};
Blockly.Arduino.logic_compare=function(){var a=this.getFieldValue("OP");a=Blockly.Arduino.logic_compare.OPERATORS[a];var b="=="==a||"!="==a?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,c=Blockly.Arduino.valueToCode(this,"A",b)||"0",d=Blockly.Arduino.valueToCode(this,"B",b)||"0";return[c+" "+a+" "+d,b]};Blockly.Arduino.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="};
Blockly.Arduino.logic_operation=function(){var a="AND"==this.getFieldValue("OP")?"&&":"||",b="&&"==a?Blockly.Arduino.ORDER_LOGICAL_AND:Blockly.Arduino.ORDER_LOGICAL_OR,c=Blockly.Arduino.valueToCode(this,"A",b)||"false",d=Blockly.Arduino.valueToCode(this,"B",b)||"false";return[c+" "+a+" "+d,b]};Blockly.Arduino.logic_negate=function(){var a=Blockly.Arduino.ORDER_UNARY_PREFIX;return["!"+(Blockly.Arduino.valueToCode(this,"BOOL",a)||"false"),a]};
Blockly.Arduino.logic_boolean=function(){return["TRUE"==this.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.logic_null=function(){return["NULL",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math={};Blockly.Arduino.math_number=function(){var a=window.parseFloat(this.getFieldValue("NUM"));return[a,0>a?Blockly.Arduino.ORDER_UNARY_PREFIX:Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_arithmetic=function(){var a=this.getFieldValue("OP"),b=Blockly.Arduino.math_arithmetic.OPERATORS[a];a=b[0];b=b[1];var c=Blockly.Arduino.valueToCode(this,"A",b)||"0",d=Blockly.Arduino.valueToCode(this,"B",b)||"0";return a?[c+a+d,b]:["Math.pow("+c+", "+d+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.operator_equals=function(){var a=Blockly.Arduino.valueToCode(this,"OPERAND1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"OPERAND2",Blockly.Arduino.ORDER_ATOMIC)||"0";return[a.substring(1,a.length-1)+" = "+b.substring(1,b.length-1),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.operator_add=function(){var a=Blockly.Arduino.valueToCode(this,"NUM1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"NUM2",Blockly.Arduino.ORDER_ATOMIC)||"0";return[Number(a)+" + "+Number(b),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.operator_subtract=function(){var a=Blockly.Arduino.valueToCode(this,"NUM1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"NUM2",Blockly.Arduino.ORDER_ATOMIC)||"0";return[Number(a)+" - "+Number(b),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.operator_multiply=function(){var a=Blockly.Arduino.valueToCode(this,"NUM1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"NUM2",Blockly.Arduino.ORDER_ATOMIC)||"0";return[Number(a)+" * "+b,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.operator_divide=function(){var a=Blockly.Arduino.valueToCode(this,"NUM1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"NUM2",Blockly.Arduino.ORDER_ATOMIC)||"0";return[a+" / "+b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.operator_gt=function(){var a=Blockly.Arduino.valueToCode(this,"OPERAND1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"OPERAND2",Blockly.Arduino.ORDER_ATOMIC)||"0";return[a.substring(1,a.length-1)+" > "+b.substring(1,b.length-1),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.operator_lt=function(){var a=Blockly.Arduino.valueToCode(this,"OPERAND1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"OPERAND2",Blockly.Arduino.ORDER_ATOMIC)||"0";return[a.substring(1,a.length-1)+" < "+b.substring(1,b.length-1),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.operator_and=function(){var a=Blockly.Arduino.valueToCode(this,"OPERAND1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"OPERAND2",Blockly.Arduino.ORDER_ATOMIC)||"0";return["("+a+" && "+b+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.operator_or=function(){var a=Blockly.Arduino.valueToCode(this,"OPERAND1",Blockly.Arduino.ORDER_ATOMIC)||"0",b=Blockly.Arduino.valueToCode(this,"OPERAND2",Blockly.Arduino.ORDER_ATOMIC)||"0";return["("+a+" || "+b+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.operator_not=function(){return["!( "+(Blockly.Arduino.valueToCode(this,"OPERAND",Blockly.Arduino.ORDER_ATOMIC)||"0")+" )",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.loops={};
Blockly.Arduino.controls_for=function(){var a=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),ScratchBlocks.Variables.NAME_TYPE),b=Blockly.Arduino.valueToCode(this,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",c=Blockly.Arduino.valueToCode(this,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",d=Blockly.Arduino.statementToCode(this,"DO");Blockly.Arduino.INFINITE_LOOP_TRAP&&(d=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+d);if(b.match(/^-?\d+(\.\d+)?$/)&&c.match(/^-?\d+(\.\d+)?$/)){var e=
parseFloat(b)<=parseFloat(c);e="for ("+a+" = "+b+"; "+a+(e?" <= ":" >= ")+c+"; "+a+(e?"++":"--")+") {\n"+d+"}\n"}else{e="";var f=b;b.match(/^\w+$/)||b.match(/^-?\d+(\.\d+)?$/)||(f=Blockly.Arduino.variableDB_.getDistinctName(a+"_start",ScratchBlocks.Variables.NAME_TYPE),e+="int "+f+" = "+b+";\n");b=c;c.match(/^\w+$/)||c.match(/^-?\d+(\.\d+)?$/)||(b=Blockly.Arduino.variableDB_.getDistinctName(a+"_end",ScratchBlocks.Variables.NAME_TYPE),e+="int "+b+" = "+c+";\n");e+="for ("+a+" = "+f+";\n    ("+f+" <= "+b+") ? "+
a+" <= "+b+" : "+a+" >= "+b+";\n    "+a+" += ("+f+" <= "+b+") ? 1 : -1) {\n"+d+"}\n"}return e};Blockly.Arduino.controls_whileUntil=function(){var a="UNTIL"==this.getFieldValue("MODE"),b=Blockly.Arduino.valueToCode(this,"BOOL",a?Blockly.Arduino.ORDER_LOGICAL_NOT:Blockly.Arduino.ORDER_NONE)||"false",c=Blockly.Arduino.statementToCode(this,"DO");Blockly.Arduino.INFINITE_LOOP_TRAP&&(c=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+c);a&&(b="!"+b);return"while ("+b+") {\n"+c+"}\n"};Blockly.Arduino.variables={};Blockly.Arduino.data_variable=function(){var a,b=Blockly.Arduino.variableDB_.allVars,c=this.getFieldValue("VARIABLE");b.forEach(function(b,e,f){b.id_==c&&(a=b.name)});return[a,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.variables_declare=function(){this.getFieldValue("TYPE");var a=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",b=Blockly.Arduino.variableDB_.getName(this.getFieldValue("VAR"),ScratchBlocks.Variables.NAME_TYPE);console.warn("NAME");console.warn(b);console.warn("TAK");Blockly.Arduino.setups_["setup_var"+b]=b+" = "+a+";\n";return""};
Blockly.Arduino.data_setvariableto=function(){var a=(Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0").replace('"',"").replace('"',""),b,c=Blockly.Arduino.variableDB_.allVars,d=this.getFieldValue("VARIABLE");c.forEach(function(a,c,g){a.id_==d&&(b=a.name)});return b+" = "+a};
Blockly.Arduino.data_changevariableby=function(){var a=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",b,c=Blockly.Arduino.variableDB_.allVars,d=this.getFieldValue("VARIABLE");c.forEach(function(a,c,g){a.id_==d&&(b=a.name)});return b+" = "+b+" + "+a+";\n"};Blockly.Arduino.procedures={};
Blockly.Arduino.procedures_defreturn=function(){var a=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),ScratchBlocks.Procedures.NAME_TYPE),b=Blockly.Arduino.statementToCode(this,"STACK");Blockly.Arduino.INFINITE_LOOP_TRAP&&(b=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c=Blockly.Arduino.valueToCode(this,"RETURN",Blockly.Arduino.ORDER_NONE)||"";c&&(c="  return "+c+";\n");for(var d=c?"int":"void",e=[],f=0;f<this.arguments_.length;f++)e[f]="int "+Blockly.Arduino.variableDB_.getName(this.arguments_[f],
ScratchBlocks.Variables.NAME_TYPE);b=d+" "+a+"("+e.join(", ")+") {\n"+b+c+"}\n";b=Blockly.Arduino.scrub_(this,b);Blockly.Arduino.definitions_[a]=b;return null};Blockly.Arduino.procedures_defnoreturn=Blockly.Arduino.procedures_defreturn;
Blockly.Arduino.procedures_callreturn=function(){for(var a=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),ScratchBlocks.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.Arduino.valueToCode(this,"ARG"+c,Blockly.Arduino.ORDER_NONE)||"null";return[a+"("+b.join(", ")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.procedures_callnoreturn=function(){for(var a=Blockly.Arduino.variableDB_.getName(this.getFieldValue("NAME"),ScratchBlocks.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.Arduino.valueToCode(this,"ARG"+c,Blockly.Arduino.ORDER_NONE)||"null";return a+"("+b.join(", ")+");\n"};
Blockly.Arduino.procedures_ifreturn=function(){var a="if ("+(Blockly.Arduino.valueToCode(this,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false")+") {\n";if(this.hasReturnValue_){var b=Blockly.Arduino.valueToCode(this,"VALUE",Blockly.Arduino.ORDER_NONE)||"null";a+="  return "+b+";\n"}else a+="  return;\n";return a+"}\n"};Blockly.Arduino.texts={};Blockly.Arduino.text=function(){return[Blockly.Arduino.quote_(this.getFieldValue("TEXT")),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.base={};var USELESS=0,OUTP=1,INP=2,VLAGA=3,SONIC=4,newcat_pins=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];Blockly.Arduino.restart=function(){newcat_pins=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];dir_r=dir_l=1;power_r=power_l=63};Blockly.Arduino.math_angle=function(){return[this.getFieldValue("NUM"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.robot_positions=function(){return[this.getFieldValue("ROBOT_POSITION"),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.high_low=function(){return["1"==this.getFieldValue("HIGHLOW")?"HIGH":"LOW",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.pin_anal=function(){return[this.getFieldValue("PIN_ANAL"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.pwm_pins=function(){return[this.getFieldValue("PWM_PINS"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.otto_dura=function(){return[this.getFieldValue("LED_NUMS"),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_sensors=function(){return[this.getFieldValue("ROBOT_SENSORS"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.robot_directions=function(){return[this.getFieldValue("ROBOT_DIRECTION"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.robot_one_motor_directions=function(){return[this.getFieldValue("ROBOT_ONE_MOTOR_DIRECTION"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.rgb_values=function(){return[this.getFieldValue("RGB_VALUES"),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_sensors_for_rgb=function(){return[this.getFieldValue("ROBOT_SENSORS_FOR_RGB"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.newcat_set_dig=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.valueToCode(this,"HIGHLOW");Blockly.Arduino.setups_["setup_output_"+a]="pinMode("+a+", OUTPUT);";return"digitalWrite("+a+", "+b+");\n"};
Blockly.Arduino.newcat_set_ana=function(){var a=Blockly.Arduino.valueToCode(this,"PWM_PINS",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.setups_["setup_output"+a]="pinMode("+a+", OUTPUT);";return"analogWrite("+a+", "+b+");\n"};
Blockly.Arduino.newcat_read_dig=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", INPUT);";return["digitalRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.newcat_read_ana=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC);if(7==newcat_pins[a]){newcat_pins.forEach(function(b,d,e){8==b&&(a=d)});var b="sensor.read("+a+");\nsensor.temperature"}else 8==newcat_pins[a]?b="sensor.read("+a+");\nsensor.humidity":(Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", INPUT);",b="analogRead("+a+")");return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.newcat_servo=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.valueToCode(this,"ANGLE",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.definitions_.define_servo="#include <Servo.h>\n";Blockly.Arduino.definitions_["var_servo"+a]="Servo servo_"+a+";\n";Blockly.Arduino.setups_["setup_servo_"+a]="servo_"+a+".attach("+a+");\n";return"servo_"+a+".write("+b+");\n"};
Blockly.Arduino.newcat_set_hum=function(){var a=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.valueToCode(this,"NUM2",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.definitions_.define_dht='#include "dht11.h"\n';Blockly.Arduino.definitions_.define_dht2="dht11 sensor;\n";newcat_pins[a]=7;newcat_pins[a]=8};
Blockly.Arduino.newcat_set_pult=function(){var a=Blockly.Arduino.valueToCode(this,"NUM",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.definitions_.pult='#include <IRremote.h>"\n';Blockly.Arduino.definitions_.define_pult="IRrecv irrecv("+a+");\n";Blockly.Arduino.setups_.setup_pult="irrecv.enableIRIn();\ndecode_results results;\n";newcat_pins[a]=5};
Blockly.Arduino.newcat_play_sound=function(){var a=Blockly.Arduino.valueToCode(this,"PIN",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.valueToCode(this,"NOTE_TYPE",Blockly.Arduino.ORDER_ATOMIC),c=Blockly.Arduino.valueToCode(this,"NOTE_DURA",Blockly.Arduino.ORDER_ATOMIC);return"tone("+a+","+60*b+","+c+");\n"};var dir_l=1,dir_r=1,power_l=63,power_r=63,dl_pin=10,sl_pin=9,dr_pin=6,sr_pin=5;
Blockly.Arduino.robots_start=function(){Blockly.Arduino.definitions_.right_forward="const byte RFPIN = 6;";Blockly.Arduino.definitions_.left_forward="const byte LFPIN = 10;";Blockly.Arduino.definitions_.right_backward="const byte RBPIN = 5;";Blockly.Arduino.definitions_.left_backward="const byte LBPIN = 9;";Blockly.Arduino.definitions_.sensor1="const byte SENSOR1PIN = 4;";Blockly.Arduino.definitions_.sensor2="const byte SENSOR2PIN = 7;";Blockly.Arduino.definitions_.sensor3="const byte SENSOR3PIN = 8;";
Blockly.Arduino.definitions_.sensor4="const byte SENSOR4PIN = 11;";Blockly.Arduino.definitions_.sensor5="const byte SENSOR5PIN = 12;";Blockly.Arduino.definitions_.power_l="byte power_l = 75;";Blockly.Arduino.definitions_.power_r="byte power_r = 75;";Blockly.Arduino.definitions_.dir_l="bool dir_l = 1;";Blockly.Arduino.definitions_.dir_r="bool dir_r = 1;";Blockly.Arduino.definitions_.step_l="volatile unsigned int lmsteps = 0;";Blockly.Arduino.definitions_.step_r="volatile unsigned int rmsteps = 0;";
Blockly.Arduino.definitions_.step_l_lim="volatile unsigned int lstepslimit = 99999;";Blockly.Arduino.definitions_.step_r_lim="volatile unsigned int rstepslimit = 99999;";Blockly.Arduino.definitions_.mutex="volatile bool mutex = 0;";Blockly.Arduino.definitions_.lmstep="void onLeftMotorStep() \n{\nlmsteps++;\nif(lmsteps >= lstepslimit)\n{\nlstepslimit=99999;\nrstepslimit=99999;\nmutex=1;\nanalogWrite( LBPIN , 0 );\nanalogWrite( RFPIN , 0 );\nanalogWrite( RBPIN , 0 );\nanalogWrite( LFPIN , 0 );\n}\n }";
Blockly.Arduino.definitions_.rmstep="void onRightMotorStep() \n{\nrmsteps++;\nif(rmsteps >= rstepslimit)\n{\nlstepslimit=99999;\nrstepslimit=99999;\nmutex=1;\nanalogWrite( LBPIN , 0 );\nanalogWrite( RFPIN , 0 );\nanalogWrite( RBPIN , 0 );\nanalogWrite( LFPIN , 0 );\n}\n}";Blockly.Arduino.definitions_.start_motors="void startmotors()\n{\nif(dir_l)\nanalogWrite( LBPIN , power_l );\nelse \nanalogWrite( LFPIN , power_l );\n if(dir_r)\nanalogWrite( RBPIN , power_r );\nelse\nanalogWrite( RFPIN , power_r );\n}";
Blockly.Arduino.definitions_.stop_motors="void stopmotors()\n{\nanalogWrite( LBPIN , 0 );\nanalogWrite( RFPIN , 0 );\nanalogWrite( RBPIN , 0 );\nanalogWrite( LFPIN , 0 );\n}";Blockly.Arduino.definitions_.start_motors_on_secs="void startmotors_onsecs(int secs)\n{\nif(dir_l)\nanalogWrite( LBPIN , power_l );\nelse \nanalogWrite( LFPIN , power_l );\n if(dir_r)\nanalogWrite( RBPIN , power_r );\nelse\nanalogWrite( RFPIN , power_r );\ndelay(secs*1000);\nstopmotors();\n}";Blockly.Arduino.setups_["setup_output_"+
sl_pin]="pinMode(LBPIN, OUTPUT);";Blockly.Arduino.setups_["setup_output_"+dl_pin]="pinMode(RBPIN, OUTPUT);";Blockly.Arduino.setups_["setup_output_"+dr_pin]="pinMode(LFPIN, OUTPUT);";Blockly.Arduino.setups_["setup_output_"+sr_pin]="pinMode(RFPIN, OUTPUT);";Blockly.Arduino.setups_.setup_output_sensor1="pinMode(SENSOR1PIN, INPUT);";Blockly.Arduino.setups_.setup_output_sensor2="pinMode(SENSOR2PIN, INPUT);";Blockly.Arduino.setups_.setup_output_sensor3="pinMode(SENSOR3PIN, INPUT);";Blockly.Arduino.setups_.setup_output_sensor4=
"pinMode(SENSOR4PIN, INPUT);";Blockly.Arduino.setups_.setup_output_sensor5="pinMode(SENSOR5PIN, INPUT);";Blockly.Arduino.setups_.setup_output_interapt0="attachInterrupt(1, onLeftMotorStep,  CHANGE);";Blockly.Arduino.setups_.setup_output_interapt1="attachInterrupt(0, onRightMotorStep, CHANGE);";return""};
Blockly.Arduino.robot_motors_on_for_seconds=function(){Blockly.Arduino.robots_start();return["startmotors_onsecs("+Blockly.Arduino.valueToCode(this,"SECONDS",Blockly.Arduino.ORDER_ATOMIC)+");\n\n",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.robot_motors_on=function(){Blockly.Arduino.robots_start();var a;dir_l&&(a="startmotors();\n\n");return[a,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.robot_motors_off=function(){Blockly.Arduino.robots_start();return["stopmotors();\n\n",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_set_direction_to=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"ROBOT_DIRECTION",Blockly.Arduino.ORDER_ATOMIC);if("direction_forward"==a){dir_l=dir_r=1;var b="dir_r = 1;\ndir_l = 1;\n\n"}else"direction_backward"==a?(dir_l=dir_r=0,b="dir_r = 0;\ndir_l = 0;\n\n"):"direction_left"==a?(dir_r=1,dir_l=0,b="dir_r = 1;\ndir_l = 0;\n\n"):"direction_right"==a&&(dir_r=0,dir_l=1,b="dir_r = 0;\ndir_l = 1;\n\n");return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_set_motors_power=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"POWER",Blockly.Arduino.ORDER_ATOMIC);power_r=Math.ceil(2.55*a);power_l=Math.ceil(2.55*a);return["power_r = ceil( "+a+" * 2.55 );\npower_l = ceil( "+a+" * 2.55 );\n\n",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_set_motors_power_left_right_separately=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"POWER_LEFT",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.valueToCode(this,"POWER_RIGHT",Blockly.Arduino.ORDER_ATOMIC);power_r=Math.ceil(2.55*a);power_l=Math.ceil(2.55*b);return["power_r = ceil( "+a+" * 2.55 );\npower_l = ceil( "+b+" * 2.55 );\n\n",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_set_motors_left_right_power_and_direction_separately=function(){Blockly.Arduino.robots_start();Blockly.Arduino.valueToCode(this,"ROBOT_LEFT_MOTOR_DIRECTION",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.valueToCode(this,"ROBOT_RIGHT_MOTOR_DIRECTION",Blockly.Arduino.ORDER_ATOMIC);var a=Blockly.Arduino.valueToCode(this,"POWER_LEFT",Blockly.Arduino.ORDER_ATOMIC),b=Blockly.Arduino.valueToCode(this,"POWER_RIGHT",Blockly.Arduino.ORDER_ATOMIC);power_r=Math.ceil(2.55*a);power_l=Math.ceil(2.55*
b);dir_l=dir_r=1;a="power_r = ceil( "+a+" * 2.55 );\npower_l = ceil( "+b+" * 2.55 );\ndir_r=1;\ndir_l=1;\n\n";return[a,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_get_sensor_data=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"ROBOT_SENSORS",Blockly.Arduino.ORDER_ATOMIC);if("sonic"==a){Blockly.Arduino.definitions_.define_servo="#include <SONIC.h>\n";var b="get_Sonic(sen)"}"sensor1"==a&&(b="analogRead(SENSOR1PIN)");"sensor2"==a&&(b="analogRead(SENSOR2PIN)");"sensor3"==a&&(b="analogRead(SENSOR3PIN)");"sensor4"==a&&(b="analogRead(SENSOR4PIN)");"sensor5"==a&&(b="analogRead(SENSOR5PIN)");"sensor_trip_meter_left"==
a&&(b="lmsteps");"sensor_trip_meter_right"==a&&(b="rmsteps");return[b,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.robot_reset_trip_meters=function(){Blockly.Arduino.robots_start();return["lmsteps = 0;\nrmsteps = 0;\n\n",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_motors_on_for_steps=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"STEPS",Blockly.Arduino.ORDER_ATOMIC);return["lstepslimit = lmsteps + "+a+";\nrstepslimit = rmsteps + "+a+";\nmutex=0;\nstartmotors();\nwhile(!mutex){}\n\n",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_turnright=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"DEGREES",Blockly.Arduino.ORDER_ATOMIC);dir_r=1;dir_l=0;return["dir_r = 1;\ndir_l = 0;\nlstepslimit = lmsteps + ceil( "+a+" * 69 / 360);\nrstepslimit = rmsteps + ceil( "+a+" * 69 / 360);\nmutex=0;\nstartmotors();\nwhile(!mutex){}\n\n",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_turnleft=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"DEGREES",Blockly.Arduino.ORDER_ATOMIC);dir_r=0;dir_l=1;return["dir_r = 0;\ndir_l = 1;\nlstepslimit = lmsteps + ceil( "+a+" * 69 / 360);\nrstepslimit = rmsteps + ceil( "+a+" * 69 / 360);\nmutex=0;\nstartmotors();\nwhile(!mutex){}\n\n",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.robot_start_button_pressed=function(){Blockly.Arduino.robots_start();return["digitalRead(A0)",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_turn_led_on=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"ROBOT_POSITION",Blockly.Arduino.ORDER_ATOMIC),b;"position1"==a&&(b="digitalWrite( 4,HIGH );\n");"position2"==a&&(b="digitalWrite( 7,HIGH );\n");"position3"==a&&(b="digitalWrite( 8,HIGH );\n");"position4"==a&&(b="digitalWrite( 11,HIGH );\n");"position5"==a&&(b="digitalWrite( 12,HIGH );\n");return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_turn_led_off=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"ROBOT_POSITION",Blockly.Arduino.ORDER_ATOMIC),b;"position1"==a&&(b="digitalWrite( 4,LOW );\n");"position2"==a&&(b="digitalWrite( 7,LOW );\n");"position3"==a&&(b="digitalWrite( 8,LOW );\n");"position4"==a&&(b="digitalWrite( 11,LOW );\n");"position5"==a&&(b="digitalWrite( 12,LOW );\n");return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.robot_get_rgb_sensor_data=function(){Blockly.Arduino.robots_start();var a=Blockly.Arduino.valueToCode(this,"ROBOT_SENSORS_FOR_RGB",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.valueToCode(this,"RGB_VALUES",Blockly.Arduino.ORDER_ATOMIC);a.substring(7,7)};Blockly.Arduino.grove={};Blockly.Arduino.grove_led=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_green_led_"+a]="pinMode("+a+", OUTPUT);";return"digitalWrite("+a+","+b+");\n"};Blockly.Arduino.grove_button=function(){var a=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_button_"+a]="pinMode("+a+", INPUT);";return["digitalRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_rotary_angle=function(){return["analogRead("+this.getFieldValue("PIN")+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.grove_tilt_switch=function(){var a=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_tilt_switch_"+a]="pinMode("+a+", INPUT);";return["digitalRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_piezo_buzzer=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_piezo_buzzer_"+a]="pinMode("+a+", OUTPUT);";return"digitalWrite("+a+","+b+");\n"};Blockly.Arduino.grove_relay=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("STAT");Blockly.Arduino.setups_["setup_relay_"+a]="pinMode("+a+", OUTPUT);";return"digitalWrite("+a+","+b+");\n"};
Blockly.Arduino.grove_temporature_sensor=function(){var a=this.getFieldValue("PIN");return["round((1/(log((float)(1023-analogRead("+a+"))*10000/analogRead("+a+"))/10000)/3975+1/298.15)-273.15)",Blockly.Arduino.ORDER_ATOMIC]};
var _get_next_pin=function(a){var b=a;b=parseInt(b)?parseInt(a)+1:"A"+(parseInt(b.slice(1,b.length))+1);a=profile["default"].digital.length;for(var c=!0,d=0;d<a;d++)profile["default"].digital[d][1]==b&&(c=!1);return c?(alert("Grove Sensor needs PIN#+1 port, current setting is out of bound."),null):b};
Blockly.Arduino.grove_serial_lcd_print=function(){var a=this.getFieldValue("PIN"),b=Blockly.Arduino.valueToCode(this,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",c=Blockly.Arduino.valueToCode(this,"TEXT2",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"''",d=Blockly.Arduino.valueToCode(this,"DELAY_TIME",Blockly.Arduino.ORDER_ATOMIC)||"1000";Blockly.Arduino.definitions_.define_seriallcd="#include <SerialLCD.h>\n";Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";var e=
_get_next_pin(a);Blockly.Arduino.definitions_["var_lcd_"+a]="SerialLCD slcd_"+a+"("+a+","+e+");\n";Blockly.Arduino.setups_["setup_lcd_"+a]="slcd_"+a+".begin();\n";a="slcd_"+a+".backlight();\nslcd_"+(a+".setCursor(0,0);\nslcd_")+(a+".print("+b+");\nslcd_")+(a+".setCursor(0,1);\nslcd_")+(a+".print("+c+");\n");return a+="delay("+d+");\n"};
Blockly.Arduino.grove_serial_lcd_power=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("STAT");Blockly.Arduino.definitions_.define_seriallcd="#include <SerialLCD.h>\n";Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";var c=_get_next_pin(a);Blockly.Arduino.definitions_["var_lcd"+a]="SerialLCD slcd_"+a+"("+a+","+c+");\n";a="slcd_"+a;return"ON"===b?a+".Power();\n":a+".noPower();\n"};
Blockly.Arduino.grove_serial_lcd_effect=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("STAT");Blockly.Arduino.definitions_.define_seriallcd="#include <SerialLCD.h>\n";Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";var c=_get_next_pin(a);Blockly.Arduino.definitions_["var_lcd"+a]="SerialLCD slcd_"+a+"("+a+","+c+");\n";a="slcd_"+a;return"LEFT"===b?a+".scrollDisplayLeft();\n":"RIGHT"===b?a+".scrollDisplayRight();\n":a+".autoscroll();\n"};
Blockly.Arduino.grove_sound_sensor=function(){return["analogRead("+this.getFieldValue("PIN")+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.grove_pir_motion_sensor=function(){var a=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", INPUT);";return["digitalRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_line_finder=function(){var a=this.getFieldValue("PIN");Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", INPUT);";return["digitalRead("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_ultrasonic_ranger=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("UNIT");Blockly.Arduino.definitions_.define_ultrasonic="#include <Ultrasonic.h>\n";Blockly.Arduino.definitions_["var_ultrasonic"+a]="Ultrasonic ultrasonic_"+a+"("+a+");";return["cm"===b?"ultrasonic_"+a+".MeasureInCentimeters()":"ultrasonic_"+a+".MeasureInInches()",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.grove_motor_shield=function(){var a=this.getFieldValue("DIRECTION");Blockly.Arduino.setups_.setup_motor="pinMode(8,OUTPUT);//I1\n  pinMode(11,OUTPUT);//I2\n  pinMode(9,OUTPUT);//speedPinA\n  pinMode(12,OUTPUT);//I3\n  pinMode(13,OUTPUT);//i4\n  pinMode(10,OUTPUT);//speedPinB\n";var b="";"forward"===a?(Blockly.Arduino.definitions_.define_forward="void forward()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,HIGH);//turn DC Motor B move clockwise\n  digitalWrite(12,LOW);\n  digitalWrite(11,LOW);//turn DC Motor A move anticlockwise\n  digitalWrite(8,HIGH);\n}\n",
b="forward();\n"):"right"===a?(Blockly.Arduino.definitions_.define_right="void right()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,LOW);//turn DC Motor B move anticlockwise\n  digitalWrite(12,HIGH);\n  digitalWrite(11,LOW);//turn DC Motor A move anticlockwise\n  digitalWrite(8,HIGH);\n}\n\n",b="right();\n"):"left"===a?(Blockly.Arduino.definitions_.define_left="void left()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,HIGH);//turn DC Motor B move clockwise\n  digitalWrite(12,LOW);\n  digitalWrite(11,HIGH);//turn DC Motor A move clockwise\n  digitalWrite(8,LOW);\n}\n\n",
b="left();\n"):"backward"===a?(Blockly.Arduino.definitions_.define_backward="void backward()\n{\n  analogWrite(9,127);//input a simulation value to set the speed\n  analogWrite(10,127);\n  digitalWrite(13,LOW);//turn DC Motor B move anticlockwise\n  digitalWrite(12,HIGH);\n  digitalWrite(11,HIGH);//turn DC Motor A move clockwise\n  digitalWrite(8,LOW);\n}\n\n",b="backward();\n"):"stop"===a&&(Blockly.Arduino.definitions_.define_stop="void stop()\n{\ndigitalWrite(9,LOW);// Unenble the pin, to stop the motor. this should be done to avid damaging the motor.\ndigitalWrite(10,LOW);\ndelay(1000);\n}\n\n",
b="stop();\n");return b};Blockly.Arduino.grove_thumb_joystick=function(){var a=this.getFieldValue("PIN");return["analogRead("+("y"===this.getFieldValue("AXIS")?_get_next_pin(a):a)+")",Blockly.Arduino.ORDER_ATOMIC]};function hexToR(a){return parseInt(cutHex(a).substring(0,2),16)}function hexToG(a){return parseInt(cutHex(a).substring(2,4),16)}function hexToB(a){return parseInt(cutHex(a).substring(4,6),16)}function cutHex(a){return"#"==a.charAt(0)?a.substring(1,7):a}
Blockly.Arduino.grove_rgb_led=function(){var a=this.getFieldValue("PIN"),b=_get_next_pin(a);Blockly.Arduino.setups_["setup_input_"+a]="pinMode("+a+", OUTPUT);";Blockly.Arduino.setups_["setup_input_"+b]="pinMode("+b+", OUTPUT);";Blockly.Arduino.definitions_.define_uint8="#define uint8 unsigned char";Blockly.Arduino.definitions_.define_uint16="#define uint16 unsigned int";Blockly.Arduino.definitions_.define_uint32="#define uint32 unsigned long int";Blockly.Arduino.definitions_["define_clkproduce_"+
a]="void ClkProduce_"+a+"(void)\n{\n  digitalWrite("+a+", LOW);\n  delayMicroseconds(20);\n  digitalWrite("+a+", HIGH);\n  delayMicroseconds(20);\n}\n";Blockly.Arduino.definitions_["define_send32zero_"+a]="void Send32Zero_"+a+"(void)\n{\n  uint8 i;\n  for (i=0; i<32; i++)\n  {\n    digitalWrite("+b+", LOW);\n    ClkProduce_"+a+"();\n  }\n}\n";Blockly.Arduino.definitions_.define_taskanticode="uint8 TakeAntiCode(uint8 dat)\n{\n  uint8 tmp = 0;\n  if ((dat & 0x80) == 0)\n  {\n    tmp |= 0x02;\n  }\n  \n  if ((dat & 0x40) == 0)\n  {\n    tmp |= 0x01;\n  }\n  return tmp;\n}\n";
Blockly.Arduino.definitions_["define_datasend_"+a]="// gray data\nvoid DatSend_"+a+"(uint32 dx)\n{\n  uint8 i;\n  for (i=0; i<32; i++)\n  {\n    if ((dx & 0x80000000) != 0)\n    {\n      digitalWrite("+b+", HIGH);\n    }\n    else\n    {\n      digitalWrite("+b+", LOW);\n    }\n  dx <<= 1;\n  ClkProduce_"+a+"();\n  }\n}\n";Blockly.Arduino.definitions_["define_datadealwithsend_"+a]="// data processing\nvoid DataDealWithAndSend_"+a+"(uint8 r, uint8 g, uint8 b)\n{\n  uint32 dx = 0;\n  dx |= (uint32)0x03 << 30;             // highest two bits 1\uff0cflag bits\n  dx |= (uint32)TakeAntiCode(b) << 28;\n  dx |= (uint32)TakeAntiCode(g) << 26;\n  dx |= (uint32)TakeAntiCode(r) << 24;\n\n  dx |= (uint32)b << 16;\n  dx |= (uint32)g << 8;\n  dx |= r;\n\n  DatSend_"+
a+"(dx);\n}\n";b="Send32Zero_"+a+"(); // begin\n";if(0==this.itemCount_)return"";for(var c=0;c<this.itemCount_;c++){var d=this.getFieldValue("RGB"+c);b+="DataDealWithAndSend_"+a+"("+hexToR(d)+", "+hexToG(d)+", "+hexToB(d)+"); // first node data\n"}return b+("Send32Zero_"+a+"();  // send to update data\n")};
Blockly.Arduino.grove_bluetooth_slave=function(){var a=this.getFieldValue("PIN"),b=_get_next_pin(a),c=this.getFieldValue("NAME");this.getFieldValue("PINCODE");var d=Blockly.Arduino.statementToCode(this,"RCV"),e=Blockly.Arduino.statementToCode(this,"SNT");Blockly.Arduino.definitions_.define_softwareserial="#include <SoftwareSerial.h>\n";Blockly.Arduino.definitions_["var_bluetooth_"+a]="SoftwareSerial blueToothSerial_"+a+"("+a+","+b+");\n";Blockly.Arduino.setups_["setup_bluetooth_"+a]="Serial.begin(9600);\n";
Blockly.Arduino.setups_["setup_bluetooth_"+a]+="  pinMode("+a+", INPUT);\n";Blockly.Arduino.setups_["setup_bluetooth_"+a]+="  pinMode("+b+", OUTPUT);\n";Blockly.Arduino.setups_["setup_bluetooth_"+a]+="  setupBlueToothConnection_"+a+"();\n";Blockly.Arduino.definitions_["define_setupBlueToothConnection_"+a]="void setupBlueToothConnection_"+a+"()\n{\n  blueToothSerial_"+a+".begin(38400); //Set BluetoothBee BaudRate to default baud rate 38400\n  blueToothSerial_"+a+'.print("\\r\\n+STWMOD=0\\r\\n"); //set the bluetooth work in slave mode\n  blueToothSerial_'+
a+'.print("\\r\\n+STNA='+c+'\\r\\n"); //set the bluetooth name as "'+c+'"\n  blueToothSerial_'+a+'.print("\\r\\n+STPIN=0000\\r\\n");//Set SLAVE pincode"0000"\n  blueToothSerial_'+a+'.print("\\r\\n+STOAUT=1\\r\\n"); // Permit Paired device to connect me\n  blueToothSerial_'+a+'.print("\\r\\n+STAUTO=0\\r\\n"); // Auto-connection should be forbidden here\n  delay(2000); // This delay is required.\n  blueToothSerial_'+a+'.print("\\r\\n+INQ=1\\r\\n"); //make the slave bluetooth inquirable \n  Serial.println("The slave bluetooth is inquirable!");\n  delay(2000); // This delay is required.\n  blueToothSerial_'+
a+".flush();\n}\n";return"char recvChar_"+a+";\nwhile(1) {\n  if(blueToothSerial_"+a+".available()) {//check if there is any data sent from the remote bluetooth shield\n    recvChar_"+a+" = blueToothSerial_"+a+".read();\n    Serial.print(recvChar_"+a+");\n"+d+"  }\n  if(Serial.available()){//check if there is any data sent from the local serial terminal, you can add the other applications here\n    recvChar_"+a+" = Serial.read();\n    blueToothSerial_"+a+".print(recvChar_"+a+");\n"+e+"  }\n}\n"};